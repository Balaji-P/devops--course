<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Docker for AWS | vfarcic.github.io</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Docker for AWS" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/jenkins-docker/docker-for-aws.html" />
<meta property="og:url" content="http://localhost:4000/jenkins-docker/docker-for-aws.html" />
<meta property="og:site_name" content="vfarcic.github.io" />
<script type="application/ld+json">
{"url":"http://localhost:4000/jenkins-docker/docker-for-aws.html","@type":"WebPage","headline":"Docker for AWS","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=d7b0fccce7a840960ab2c608e690e524c171b2d9">
  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">vfarcic.github.io</a></h1>
      

      <h1 id="docker-for-aws">Docker for AWS</h1>

<hr />

<p><a href="https://youtu.be/r5cofUYqnn8">youtu.be/r5cofUYqnn8</a></p>

<p><img src="/img/qr/docker-for-aws.png" alt="" /></p>

<h2 id="prerequisites">Prerequisites</h2>

<hr />

<ul>
  <li><a href="https://hub.docker.com/">Docker Hub</a> account</li>
  <li><a href="https://www.docker.com/">Docker</a></li>
  <li><a href="https://aws.amazon.com/">AWS account</a></li>
  <li>SSH client (e.g. <a href="http://www.putty.org/">Putty</a>)</li>
  <li><a href="https://git-scm.com/">Git</a> &amp; GitBash (if Windows)</li>
</ul>

<h2 id="creating-aws-key-pair">Creating AWS Key Pair</h2>

<hr />

<ul>
  <li>Open <a href="http://console.aws.amazon.com">AWS Console</a></li>
  <li>Click the <em>EC2</em> link</li>
  <li>Click the <em>Key Pairs</em> link</li>
  <li>Click the <em>Create Key Pair</em> button</li>
  <li>Name it <em>workshop</em></li>
  <li>Click the <em>Create</em> button</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>chmod 0400 workshop.pem
</code></pre></div></div>

<h2 id="creating-a-docker-cluster">Creating a Docker Cluster</h2>

<hr />

<ul>
  <li>Open <a href="https://store.docker.com/editions/community/docker-ce-aws">Docker Community Edition for AWS</a></li>
  <li>Click the <em>Get Docker</em> button</li>
  <li>Click the <em>Next</em> button</li>
  <li>Type <em>jenkins-is-cool</em> as the <em>Stack name</em></li>
  <li>Change the <em>Number of Swarm worker nodes</em> to <em>0</em></li>
  <li>Select <em>workshop</em> as your SSH key in <em>Which SSH key to use</em></li>
  <li>Select <em>yes</em> as <em>Enable daily resource cleanup</em></li>
  <li>Select <em>no</em> as <em>Use Cloudwatch for container logging</em></li>
</ul>

<p>Note:
Weâ€™ll use https://docs.docker.com/docker-for-aws/. It is a very simple way to create a Docker cluster. I put this at the very beginning, since the process, even though it is fully automated, takes around 15 minutes. We can go through theoretical slides that follow while clusters are being created.</p>

<h2 id="creating-a-docker-cluster-1">Creating a Docker Cluster</h2>

<hr />

<ul>
  <li>Select <em>yes</em> as <em>Create EFS prerequsities for CloudStor</em></li>
  <li>Choose <em>t2.medium</em> as <em>Swarm manager instance type</em></li>
  <li>Click the <em>Next</em> button</li>
  <li>Click the <em>Next</em> button</li>
  <li>Select <em>I acknowledge that AWS CloudFormation might create IAM resources</em></li>
  <li>Click the <em>Create button</em></li>
</ul>

<h2 id="entering-the-cluster">Entering The Cluster</h2>

<hr />

<ul>
  <li>Click the <em>Output</em> tab in CloudFormation Stacks screen</li>
  <li>Copy <em>DefaultDNSTarget</em></li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">CLUSTER_DNS</span><span class="o">=[</span>...]
</code></pre></div></div>

<ul>
  <li>Click the link next to <em>Managers</em></li>
  <li>Select any of the nodes</li>
  <li>Copy <em>IPv4 Public IP</em> value</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">CLUSTER_IP</span><span class="o">=[</span>...]

ssh <span class="nt">-i</span> workshop.pem docker@<span class="nv">$CLUSTER_IP</span>

docker node <span class="nb">ls

exit</span>
</code></pre></div></div>


      
      <div class="footer border-top border-gray-light mt-5 pt-3 text-right text-gray">
        This site is open source. <a href="https://github.com/vfarcic/vfarcic.github.io/edit/gh-pages/jenkins-docker/docker-for-aws.md">Improve this page</a>.
      </div>
      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
    
  </body>
</html>
